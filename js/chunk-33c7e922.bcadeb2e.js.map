{"version":3,"sources":["webpack:///./src/views/articles/add.vue?7bff","webpack:///./src/views/articles/add.vue?5d6c","webpack:///src/views/articles/add.vue","webpack:///./src/views/articles/add.vue?be6e","webpack:///./src/views/articles/add.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","ref","attrs","rules","article","model","value","callback","$$v","$set","expression","editorOption","on","$event","cover","image","type","_l","item","idx","key","images","_e","hAddArticle","staticRenderFns","name","data","title","content","channel_id","placeholder","modules","toolbar","created","methods","$refs","form","validate","components","MyBreadcrumb","quillEditor","MyChannels","MyCover","component"],"mappings":"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","file":"js/chunk-33c7e922.bcadeb2e.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./add.vue?vue&type=style&index=0&id=454248dc&scoped=true&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./add.vue?vue&type=style&index=0&id=454248dc&scoped=true&lang=less&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"publish-container\"},[_c('el-card',[_c('div',{staticClass:\"header\"},[_c('my-breadcrumb',[_vm._v(\"发布文章\")])],1),_c('br'),_c('el-form',{ref:\"form\",attrs:{\"rules\":_vm.rules,\"model\":_vm.article,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"标题\",\"prop\":\"title\"}},[_c('el-input',{model:{value:(_vm.article.title),callback:function ($$v) {_vm.$set(_vm.article, \"title\", $$v)},expression:\"article.title\"}})],1),_c('el-form-item',{attrs:{\"label\":\"内容\",\"prop\":\"content\"}},[_c('quill-editor',{attrs:{\"type\":\"textarea\",\"options\":_vm.editorOption},model:{value:(_vm.article.content),callback:function ($$v) {_vm.$set(_vm.article, \"content\", $$v)},expression:\"article.content\"}})],1),_c('el-form-item',{attrs:{\"label\":\"封面\"}},[_c('el-radio-group',{on:{\"change\":function($event){_vm.article.cover.image=[]}},model:{value:(_vm.article.cover.type),callback:function ($$v) {_vm.$set(_vm.article.cover, \"type\", $$v)},expression:\"article.cover.type\"}},[_c('el-radio',{attrs:{\"label\":1}},[_vm._v(\"单图\")]),_c('el-radio',{attrs:{\"label\":3}},[_vm._v(\"三图\")]),_c('el-radio',{attrs:{\"label\":0}},[_vm._v(\"无图\")]),_c('el-radio',{attrs:{\"label\":-1}},[_vm._v(\"自动\")])],1)],1),(_vm.article.cover.type > 0)?_c('el-form-item',{attrs:{\"label\":\"封面\"}},[_c('el-row',{attrs:{\"gutter\":10}},_vm._l((_vm.article.cover.type),function(item,idx){return _c('el-col',{key:idx,attrs:{\"xs\":12,\"sm\":6,\"md\":6,\"lg\":4}},[_c('my-cover',{model:{value:(_vm.article.cover.images[idx]),callback:function ($$v) {_vm.$set(_vm.article.cover.images, idx, $$v)},expression:\"article.cover.images[idx]\"}})],1)}),1)],1):_vm._e(),_c('my-channels',{model:{value:(_vm.article.channel_id),callback:function ($$v) {_vm.$set(_vm.article, \"channel_id\", $$v)},expression:\"article.channel_id\"}}),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.hAddArticle(false)}}},[_vm._v(\"发表\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.hAddArticle(true)}}},[_vm._v(\"存入草稿\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class='publish-container'>\r\n   <el-card>\r\n     <div class=\"header\"><my-breadcrumb>发布文章</my-breadcrumb></div>\r\n     <br>\r\n     <el-form :rules=\"rules\" ref=\"form\" :model=\"article\" label-width=\"80px\">\r\n      <el-form-item label=\"标题\" prop=\"title\">\r\n        <el-input v-model=\"article.title\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"内容\" prop=\"content\">\r\n        <quill-editor type=\"textarea\" v-model=\"article.content\" :options=\"editorOption\"></quill-editor>\r\n      </el-form-item>\r\n      <el-form-item label=\"封面\">\r\n        <el-radio-group @change=\"article.cover.image=[]\" v-model=\"article.cover.type\">\r\n          <!-- 根据后端接口 -->\r\n          <el-radio :label=\"1\">单图</el-radio>\r\n          <el-radio :label=\"3\">三图</el-radio>\r\n          <el-radio :label=\"0\">无图</el-radio>\r\n          <el-radio :label=\"-1\">自动</el-radio>\r\n        </el-radio-group>\r\n      </el-form-item>\r\n      <!-- 封面组件存在的价值是对封面图片进行赋值 -->\r\n      <el-form-item v-if=\"article.cover.type > 0\" label=\"封面\">\r\n        <el-row :gutter=\"10\">\r\n          <el-col v-for=\"(item,idx) in article.cover.type\" :key=\"idx\" :xs=\"12\" :sm=\"6\" :md=\"6\" :lg=\"4\"><my-cover v-model=\"article.cover.images[idx]\"></my-cover>\r\n          </el-col>\r\n        </el-row>\r\n      </el-form-item>\r\n      <!-- <el-form-item label=\"频道\" prop=\"channel_id\">\r\n        <el-select v-model=\"article.channel_id\" placeholder=\"请选择频道\">\r\n          <el-option\r\n          v-for=\"channel in channels\"\r\n          :key=\"channel.id\"\r\n          :label=\"channel.name\"\r\n          :value=\"channel.id\"></el-option>\r\n        </el-select>\r\n      </el-form-item> -->\r\n      <my-channels v-model=\"article.channel_id\"></my-channels>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" @click=\"hAddArticle(false)\">发表</el-button>\r\n        <el-button type=\"primary\" @click=\"hAddArticle(true)\">存入草稿</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n   </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// 导入样式\r\nimport 'quill/dist/quill.core.css'\r\nimport 'quill/dist/quill.snow.css'\r\nimport 'quill/dist/quill.bubble.css'\r\n// 导入组件\r\nimport { quillEditor } from 'vue-quill-editor'\r\nimport MyChannels from '../../components/MyChannels v-model.vue'\r\nimport MyBreadcrumb from '../../components/MyBreadcrumb.vue'\r\nimport MyCover from '../../components/Mycover.vue'\r\nimport { addArticle } from '../../api/article.js'\r\nexport default {\r\n  name: 'AddArticle',\r\n  data () {\r\n    return {\r\n      rules: {\r\n        title: [\r\n          { required: true, message: '请输入文章标题', trigger: 'blur' },\r\n          { min: 5, max: 30, message: '长度5-30之间', trigger: 'blur' }\r\n        ],\r\n        content: [\r\n          { required: true, message: '请输入文章内容', trigger: 'blur' },\r\n          { min: 20, max: 200, message: '最少20个字', trigger: 'blur' }\r\n        ],\r\n        channel_id: [\r\n          { required: true, message: '请选择文章频道', trigger: 'blur' }\r\n        ]\r\n      },\r\n      // channels: [], // 频道列表\r\n      article: {\r\n        title: 'test标题', // 标题\r\n        channel_id: '', // 频道id\r\n        content: '敲代码了', // 文章内容\r\n        cover: {\r\n          type: '', // 封面的图片个数\r\n          images: [] // 封面的地址\r\n        }\r\n      },\r\n      editorOption: {\r\n        // 自定义编辑栏\r\n        placeholder: '',\r\n        modules: {\r\n          // 配置工具栏\r\n          toolbar: [\r\n            ['bold', 'italic', 'underline', 'strike'],\r\n            ['blockquote', 'code-block'],\r\n            [{ header: 1 }, { header: 2 }],\r\n            [{ list: 'ordered' }, { list: 'bullet' }],\r\n            [{ indent: '-1' }, { indent: '+1' }],\r\n            ['image']\r\n          ]\r\n        }\r\n      }\r\n    }\r\n  },\r\n  created () {\r\n    // this.loadChannels()\r\n  },\r\n  /**\r\n   * 1.装请求接口\r\n   * 2.再发布文章页面调用接口\r\n   *  --1.给发布按钮添加submit事件\r\n   *  --2.手机表单拿数据\r\n   *  --3.\r\n   */\r\n  methods: {\r\n    // async hAddArticle (isDraft) {\r\n    //   try {\r\n    //     const result = await addArticle(isDraft, this.article)\r\n    //     console.log(result)\r\n    //     this.$message.success('发布成功')\r\n    //     this.article.title = ''\r\n    //     this.article.content = ''\r\n    //   } catch (err) {\r\n    //     console.log(err)\r\n    //     this.$message.error('发布失败')\r\n    //   }\r\n    // },\r\n    hAddArticle (isDraft) {\r\n      /**\r\n       * this.$refs.form 获取页面中ref=from整个组件\r\n       */\r\n      this.$refs.form.validate(async (valid) => {\r\n        console.log('校验结果', valid)\r\n        if (valid) {\r\n          try {\r\n            const result = await addArticle(isDraft, this.article)\r\n            console.log(result)\r\n            this.$message.success('发布成功')\r\n            this.article.title = ''\r\n            this.article.content = ''\r\n          } catch (err) {\r\n            console.log(err)\r\n            this.$message.error('发布失败')\r\n          }\r\n        }\r\n      })\r\n    }\r\n    // async loadChannels () {\r\n    //   try {\r\n    //     const result = await getArticlesChannels()\r\n    //     console.log(result)\r\n    //     this.channels = result.data.data.channels\r\n    //   } catch (err) {\r\n    //     console.log(err)\r\n    //   }\r\n    // }\r\n  },\r\n  components: {\r\n    MyBreadcrumb,\r\n    quillEditor,\r\n    MyChannels,\r\n    MyCover\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang='less'>\r\n// 覆盖富文本样式(publish-container目的提高选择器优先级)\r\n.publish-container /deep/ .ql-editor{\r\n  height: 300px;\r\n}\r\n.publish-container /deep/ .ql-toolbar.ql-snow{\r\n  padding: 0 8px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./add.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./add.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./add.vue?vue&type=template&id=454248dc&scoped=true&\"\nimport script from \"./add.vue?vue&type=script&lang=js&\"\nexport * from \"./add.vue?vue&type=script&lang=js&\"\nimport style0 from \"./add.vue?vue&type=style&index=0&id=454248dc&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"454248dc\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}